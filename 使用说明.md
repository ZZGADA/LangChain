# LangChain Python 用例集合

这个项目包含了多个LangChain的使用示例，从简单到复杂，适合不同的需求和场景。

## 📋 项目文件说明

### 1. `langchain_local_example.py` ⭐ **推荐新手使用**
- **完全本地运行，无需API密钥**
- 使用模拟的AI模型，展示LangChain和LangGraph的基本架构
- 支持基本对话功能
- 立即可用，适合学习LangChain的基本概念

### 2. `gemini_realtime_chat.py` 🔥 **实时对话推荐**
- **专为实时对话优化的 Gemini 聊天机器人**
- 直接使用 Google Gemini API，响应速度最快
- 支持对话上下文记忆
- 内置 API 密钥设置向导
- 自动尝试多个 Gemini 模型版本
- 支持打字效果和特殊命令

### 3. `langchain_gemini_chatbot.py` 🧠 **LangChain 完整版**
- **完整的 LangChain + LangGraph 框架示例**
- 展示企业级聊天机器人架构
- 内置对话记忆和状态管理
- 支持复杂工作流和扩展功能
- 完善的错误处理和统计功能
- 适合学习 LangChain 最佳实践

### 4. `langchain_openai_example.py`
- 使用OpenAI GPT模型的完整示例
- 需要设置 `OPENAI_API_KEY` 环境变量
- 展示真实的AI对话功能
- 适合有OpenAI API访问权限的用户

### 5. `lang_chain_study_1.py` (原始文件)
- 使用Anthropic Claude模型的示例
- 目前存在兼容性问题，不推荐直接使用

## 🚀 快速开始

### 方法1：本地示例（推荐新手）

```bash
# 直接运行，无需设置API密钥
python langchain_local_example.py
```

### 方法2：Gemini 实时聊天（强烈推荐）⚡

```bash
# 直接运行，程序会引导您设置API密钥
python gemini_realtime_chat.py
```

**特点：**
- 🚀 最快的响应速度
- 🧠 记住对话上下文
- 🎯 专为实时对话优化
- 🔧 内置设置向导，无需手动配置

### 方法3：LangChain 完整版（学习框架推荐）🧠

```bash
# 直接运行，程序会引导您设置API密钥
python langchain_gemini_chatbot.py
```

**特点：**
- 🏗️ 完整的 LangChain 架构
- 🧠 智能记忆管理
- 📊 对话统计功能
- 🔧 企业级特性
- 📚 最佳实践展示

### 方法4：OpenAI示例

```bash
# 1. 设置环境变量
export OPENAI_API_KEY="your-openai-api-key-here"

# 2. 运行程序
python langchain_openai_example.py
```

## 📦 安装依赖

```bash
# 安装所有依赖
pip install -r requirements.txt
```

## 🎯 学习目标

通过这些示例，你将学习到：

1. **LangChain基础概念**
   - 消息类型（HumanMessage, AIMessage）
   - 语言模型集成
   - 基本的对话流程

2. **LangGraph工作流**
   - 状态管理（State）
   - 图结构（StateGraph）
   - 节点和边的创建
   - 工作流编译和执行

3. **实际应用模式**
   - 聊天机器人构建
   - 错误处理
   - 用户交互设计

4. **多模型集成**
   - Google Gemini 集成
   - OpenAI GPT 集成
   - 本地模拟模型

5. **实时对话优化**
   - 直接 API 调用优化
   - 对话上下文管理
   - 用户体验设计

6. **企业级架构**
   - 组件化设计
   - 状态管理
   - 内存持久化
   - 扩展性设计

## 🔧 功能特性

### 本地示例功能：
- ✅ 基本对话
- ✅ 时间查询
- ✅ LangChain/LangGraph介绍
- ✅ 帮助系统
- ✅ 优雅的用户界面

### Gemini 实时聊天功能：🔥
- ✅ **最快响应速度** - 直接API调用
- ✅ **智能对话** - Google Gemini 2.0 Flash
- ✅ **上下文记忆** - 记住对话历史
- ✅ **自动配置** - 内置API密钥设置向导
- ✅ **多模型支持** - 自动尝试最佳可用模型
- ✅ **特殊命令** - 清空历史、帮助等
- ✅ **打字效果** - 模拟真实打字体验
- ✅ **错误处理** - 完善的异常处理机制

### LangChain 完整版功能：🧠
- ✅ **完整框架** - LangChain + LangGraph 架构
- ✅ **智能记忆** - 内置对话记忆管理
- ✅ **状态管理** - 完整的状态跟踪
- ✅ **统计功能** - 对话统计和分析
- ✅ **提示模板** - 专业的提示工程
- ✅ **处理链** - 可扩展的处理流程
- ✅ **企业特性** - 完善的错误处理和日志
- ✅ **最佳实践** - 展示 LangChain 标准用法

### OpenAI示例功能：
- ✅ 真实AI对话
- ✅ 流式响应
- ✅ 完整的LangGraph集成
- ✅ 环境变量管理

## 🔑 API 密钥获取指南

### Google Gemini API
1. 访问 [Google AI Studio](https://aistudio.google.com/app/apikey)
2. 登录你的 Google 账号
3. 创建新的 API 密钥
4. 复制密钥并设置环境变量

**💡 提示：** 使用 `gemini_realtime_chat.py` 或 `langchain_gemini_chatbot.py` 时，程序会自动引导您完成API密钥设置！

### OpenAI API
1. 访问 [OpenAI Platform](https://platform.openai.com/api-keys)
2. 登录你的 OpenAI 账号
3. 创建新的 API 密钥
4. 复制密钥并设置环境变量

## 🐛 常见问题

### Q: 我想要最快的实时对话体验，应该用哪个？
A: **强烈推荐使用 `gemini_realtime_chat.py`**！它专为实时对话优化，响应速度最快，用户体验最佳。

### Q: 我想学习 LangChain 框架，应该用哪个？
A: **推荐使用 `langchain_gemini_chatbot.py`**！它展示了完整的 LangChain 架构，包含最佳实践和企业级特性。

### Q: 两个 Gemini 版本有什么区别？
A: 
- **实时聊天版本**：专为速度优化，直接API调用，最快响应
- **LangChain 完整版**：展示框架架构，功能更丰富，适合学习

### Q: 为什么原始的Anthropic示例不工作？
A: 当前的langchain-anthropic版本存在兼容性问题。我们提供了稳定的替代方案。

### Q: 我没有 API 密钥怎么办？
A: 使用本地示例（`langchain_local_example.py`），它不需要任何API调用。或者运行 Gemini 版本，程序会引导您获取和设置API密钥。

### Q: Gemini 和 OpenAI 哪个更好？
A: Gemini 是 Google 的最新模型，支持多语言，性能优秀且成本较低。OpenAI 的 GPT 系列也很强大。建议根据需求选择。

### Q: 如何扩展本地示例？
A: 修改`MockChatModel`类中的`invoke`方法，添加更多的响应逻辑。

### Q: API 调用失败怎么办？
A: 检查网络连接、API 密钥是否正确、是否有足够的配额等。Gemini 版本会自动尝试多个模型。

## 📚 进阶学习

掌握基础后，你可以：

1. **添加工具调用** - 集成外部API和服务
2. **创建复杂工作流** - 使用条件分支和并行处理
3. **部署到生产环境** - 添加API接口和Web界面
4. **多模态功能** - 结合图像、语音等功能
5. **性能优化** - 学习如何优化响应速度和用户体验
6. **企业集成** - 与现有系统和数据库集成

## 📖 推荐学习路径

1. **入门阶段**：`langchain_local_example.py` → 了解基础概念
2. **实战阶段**：`gemini_realtime_chat.py` → 体验真实对话
3. **深入阶段**：`langchain_gemini_chatbot.py` → 学习完整架构
4. **扩展阶段**：基于框架版本添加自定义功能

## 🤝 支持

如果遇到问题：
1. 首先尝试本地示例确认环境正常
2. 使用 `gemini_realtime_chat.py` 获得最佳体验
3. 使用 `langchain_gemini_chatbot.py` 学习框架架构
4. 检查依赖版本是否匹配
5. 确认API密钥设置正确（如果使用API示例）
6. 查看控制台错误信息进行调试
7. 参考 `聊天机器人对比分析.md` 了解架构差异

## 📄 许可

本项目仅供学习使用。 