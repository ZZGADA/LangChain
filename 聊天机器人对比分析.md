# èŠå¤©æœºå™¨äººæ¶æ„å¯¹æ¯”åˆ†æ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†åˆ†æäº†ä¸¤ç§ä¸åŒçš„èŠå¤©æœºå™¨äººå®ç°æ–¹å¼ï¼š**å®æ—¶èŠå¤©æœºå™¨äºº**ï¼ˆç›´æ¥ API è°ƒç”¨ï¼‰å’Œ **LangChain èŠå¤©æœºå™¨äºº**ï¼ˆåŸºäº LangChain æ¡†æ¶ï¼‰çš„åŒºåˆ«ã€ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚

---

## ğŸ¯ æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”

| ç‰¹æ€§ | å®æ—¶èŠå¤©æœºå™¨äºº | LangChain èŠå¤©æœºå™¨äºº |
|------|----------------|---------------------|
| **æ¶æ„å¤æ‚åº¦** | ç®€å•ç›´æ¥ | ç›¸å¯¹å¤æ‚ |
| **å“åº”é€Ÿåº¦** | æœ€å¿« | ç¨æ…¢ï¼ˆæ¡†æ¶å¼€é”€ï¼‰ |
| **æ‰©å±•æ€§** | æœ‰é™ | æå¼º |
| **å­¦ä¹ æˆæœ¬** | ä½ | ä¸­ç­‰ |
| **ç»´æŠ¤æˆæœ¬** | ä½ | ä¸­ç­‰ |
| **åŠŸèƒ½ä¸°å¯Œåº¦** | åŸºç¡€ | ä¸°å¯Œ |

---

## ğŸš€ å®æ—¶èŠå¤©æœºå™¨äººï¼ˆç›´æ¥ API è°ƒç”¨ï¼‰

### æ¶æ„ç‰¹ç‚¹

```python
ç”¨æˆ·è¾“å…¥ â†’ ç›´æ¥è°ƒç”¨ Gemini API â†’ å¤„ç†å“åº” â†’ è¾“å‡ºç»™ç”¨æˆ·
```

### æ ¸å¿ƒä»£ç ç»“æ„

```python
class GeminiRealTimeChat:
    def __init__(self):
        self.llm = ChatGoogleGenerativeAI(model="gemini-2.0-flash-exp")
        self.conversation_history = []
    
    def chat_with_gemini(self, user_input):
        # ç›´æ¥è°ƒç”¨æ¨¡å‹
        self.conversation_history.append(HumanMessage(content=user_input))
        response = self.llm.invoke(self.conversation_history)
        return response.content
```

### âœ… ä¼˜ç‚¹

1. **æå¿«çš„å“åº”é€Ÿåº¦**
   - æ— æ¡†æ¶å¼€é”€
   - ç›´æ¥ API è°ƒç”¨
   - æœ€å°åŒ–çš„å¤„ç†é“¾è·¯

2. **ç®€å•æ˜“æ‡‚**
   - ä»£ç é€»è¾‘æ¸…æ™°
   - æ˜“äºè°ƒè¯•
   - å­¦ä¹ æˆæœ¬ä½

3. **è½»é‡çº§**
   - ä¾èµ–å°‘
   - å†…å­˜å ç”¨å°
   - éƒ¨ç½²ç®€å•

4. **é«˜åº¦å¯æ§**
   - å®Œå…¨æ§åˆ¶å¯¹è¯æµç¨‹
   - è‡ªå®šä¹‰é”™è¯¯å¤„ç†
   - çµæ´»çš„é…ç½®é€‰é¡¹

### âŒ ç¼ºç‚¹

1. **åŠŸèƒ½æœ‰é™**
   - åªèƒ½è¿›è¡ŒåŸºæœ¬å¯¹è¯
   - éš¾ä»¥é›†æˆå¤æ‚åŠŸèƒ½
   - æ‰©å±•æ€§å—é™

2. **é‡å¤é€ è½®å­**
   - éœ€è¦æ‰‹åŠ¨å®ç°å¸¸è§åŠŸèƒ½
   - ç¼ºå°‘æ ‡å‡†åŒ–ç»„ä»¶
   - ç»´æŠ¤æˆæœ¬éšåŠŸèƒ½å¢åŠ è€Œä¸Šå‡

3. **ç¼ºä¹é«˜çº§ç‰¹æ€§**
   - æ— å†…ç½®è®°å¿†ç®¡ç†
   - æ— å·¥å…·è°ƒç”¨æ”¯æŒ
   - æ— å¤æ‚å·¥ä½œæµ

---

## ğŸ”— LangChain èŠå¤©æœºå™¨äºº

### æ¶æ„ç‰¹ç‚¹

```python
ç”¨æˆ·è¾“å…¥ â†’ LangGraph çŠ¶æ€ç®¡ç† â†’ LangChain ç»„ä»¶é“¾ â†’ æ¨¡å‹è°ƒç”¨ â†’ å“åº”å¤„ç† â†’ è¾“å‡º
```

### æ ¸å¿ƒä»£ç ç»“æ„

```python
from langgraph.graph import StateGraph, START, END
from langchain_google_genai import ChatGoogleGenerativeAI

class State(TypedDict):
    messages: Annotated[list, add_messages]

def chatbot(state: State):
    return {"messages": [llm.invoke(state["messages"])]}

# åˆ›å»ºçŠ¶æ€å›¾
graph_builder = StateGraph(State)
graph_builder.add_node("chatbot", chatbot)
graph_builder.add_edge(START, "chatbot")
graph_builder.add_edge("chatbot", END)
graph = graph_builder.compile()
```

### âœ… ä¼˜ç‚¹

1. **å¼ºå¤§çš„æ‰©å±•æ€§**
   - æ¨¡å—åŒ–è®¾è®¡
   - ä¸°å¯Œçš„ç»„ä»¶ç”Ÿæ€
   - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½

2. **æ ‡å‡†åŒ–æ¡†æ¶**
   - æˆç†Ÿçš„è®¾è®¡æ¨¡å¼
   - ç¤¾åŒºæœ€ä½³å®è·µ
   - å‡å°‘é‡å¤å¼€å‘

3. **é«˜çº§åŠŸèƒ½æ”¯æŒ**
   - å†…ç½®è®°å¿†ç®¡ç†
   - å·¥å…·è°ƒç”¨é›†æˆ
   - å¤æ‚å·¥ä½œæµæ”¯æŒ
   - å¤šæ¨¡å‹åˆ‡æ¢

4. **ä¼ä¸šçº§ç‰¹æ€§**
   - å®Œå–„çš„é”™è¯¯å¤„ç†
   - æ—¥å¿—å’Œç›‘æ§
   - æ€§èƒ½ä¼˜åŒ–
   - å®‰å…¨æ€§è€ƒè™‘

5. **ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ**
   - å¤§é‡é¢„æ„å»ºç»„ä»¶
   - ç¬¬ä¸‰æ–¹é›†æˆ
   - ç¤¾åŒºæ”¯æŒ

### âŒ ç¼ºç‚¹

1. **å­¦ä¹ æ›²çº¿é™¡å³­**
   - æ¦‚å¿µå¤æ‚
   - æ–‡æ¡£åºå¤§
   - éœ€è¦æ—¶é—´æŒæ¡

2. **æ€§èƒ½å¼€é”€**
   - æ¡†æ¶å±‚å¼€é”€
   - çŠ¶æ€ç®¡ç†æˆæœ¬
   - å“åº”æ—¶é—´ç•¥é•¿

3. **è¿‡åº¦å·¥ç¨‹**
   - å¯¹ç®€å•éœ€æ±‚å¯èƒ½è¿‡äºå¤æ‚
   - å¢åŠ ç³»ç»Ÿå¤æ‚åº¦
   - è°ƒè¯•éš¾åº¦å¢åŠ 

---

## ğŸ”§ æŠ€æœ¯å®ç°å¯¹æ¯”

### æ¶ˆæ¯å¤„ç†æ–¹å¼

#### å®æ—¶èŠå¤©æœºå™¨äºº
```python
def chat_with_gemini(self, user_input):
    # ç®€å•ç›´æ¥çš„æ¶ˆæ¯å¤„ç†
    self.conversation_history.append(HumanMessage(content=user_input))
    response = self.llm.invoke(self.conversation_history)
    self.conversation_history.append(AIMessage(content=response.content))
    return response.content
```

#### LangChain èŠå¤©æœºå™¨äºº
```python
def chatbot(state: State):
    # é€šè¿‡çŠ¶æ€ç®¡ç†å¤„ç†æ¶ˆæ¯
    return {"messages": [llm.invoke(state["messages"])]}

# ä½¿ç”¨å›¾ç»“æ„å¤„ç†
for event in graph.stream({"messages": [HumanMessage(content=user_input)]}):
    for value in event.values():
        response = value["messages"][-1].content
```

### é”™è¯¯å¤„ç†

#### å®æ—¶èŠå¤©æœºå™¨äºº
```python
try:
    response = self.llm.invoke(self.conversation_history)
    return response.content
except Exception as e:
    return f"å¯¹è¯å‡ºé”™: {e}\nè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–é‡è¯•ã€‚"
```

#### LangChain èŠå¤©æœºå™¨äºº
```python
try:
    for event in graph.stream({"messages": [HumanMessage(content=user_input)]}):
        # LangChain å†…ç½®é”™è¯¯å¤„ç†æœºåˆ¶
        for value in event.values():
            current_response = value["messages"][-1].content
except Exception as e:
    print(f"âŒ å¯¹è¯å¤„ç†å¤±è´¥: {e}")
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### å“åº”æ—¶é—´æµ‹è¯•ï¼ˆä¼°ç®—ï¼‰

| æ“ä½œ | å®æ—¶èŠå¤©æœºå™¨äºº | LangChain èŠå¤©æœºå™¨äºº |
|------|----------------|---------------------|
| åˆå§‹åŒ–æ—¶é—´ | ~1ç§’ | ~2-3ç§’ |
| å•æ¬¡å¯¹è¯ | ~1-2ç§’ | ~1.5-3ç§’ |
| å†…å­˜å ç”¨ | ~50MB | ~100-150MB |
| CPU ä½¿ç”¨ | ä½ | ä¸­ç­‰ |

### æ‰©å±•æ€§å¯¹æ¯”

| åŠŸèƒ½éœ€æ±‚ | å®æ—¶èŠå¤©æœºå™¨äºº | LangChain èŠå¤©æœºå™¨äºº |
|----------|----------------|---------------------|
| åŸºç¡€å¯¹è¯ | â­â­â­â­â­ | â­â­â­â­ |
| è®°å¿†ç®¡ç† | â­â­ | â­â­â­â­â­ |
| å·¥å…·è°ƒç”¨ | â­ | â­â­â­â­â­ |
| å¤šæ¨¡å‹æ”¯æŒ | â­â­ | â­â­â­â­â­ |
| å¤æ‚å·¥ä½œæµ | â­ | â­â­â­â­â­ |
| éƒ¨ç½²ç®€æ˜“åº¦ | â­â­â­â­â­ | â­â­â­ |

---

## ğŸ¯ é€‚ç”¨åœºæ™¯åˆ†æ

### å®æ—¶èŠå¤©æœºå™¨äººé€‚ç”¨äºï¼š

1. **å¿«é€ŸåŸå‹å¼€å‘**
   - æ¦‚å¿µéªŒè¯
   - æ¼”ç¤ºé¡¹ç›®
   - å­¦ä¹ å’Œå®éªŒ

2. **ç®€å•å¯¹è¯éœ€æ±‚**
   - åŸºç¡€é—®ç­”
   - å®¢æœæœºå™¨äºº
   - æ•™è‚²è¾…åŠ©

3. **æ€§èƒ½æ•æ„Ÿåœºæ™¯**
   - å®æ—¶äº¤äº’è¦æ±‚
   - èµ„æºå—é™ç¯å¢ƒ
   - é«˜å¹¶å‘åœºæ™¯

4. **å°å›¢é˜Ÿé¡¹ç›®**
   - å¿«é€Ÿå¼€å‘
   - ç®€å•ç»´æŠ¤
   - æˆæœ¬æ§åˆ¶

### LangChain èŠå¤©æœºå™¨äººé€‚ç”¨äºï¼š

1. **ä¼ä¸šçº§åº”ç”¨**
   - å¤æ‚ä¸šåŠ¡é€»è¾‘
   - å¤šç³»ç»Ÿé›†æˆ
   - é«˜å¯é æ€§è¦æ±‚

2. **åŠŸèƒ½ä¸°å¯Œçš„åŠ©æ‰‹**
   - å·¥å…·è°ƒç”¨
   - çŸ¥è¯†åº“é›†æˆ
   - å¤šæ¨¡æ€äº¤äº’

3. **é•¿æœŸç»´æŠ¤é¡¹ç›®**
   - æŒç»­åŠŸèƒ½æ‰©å±•
   - å›¢é˜Ÿåä½œå¼€å‘
   - æ ‡å‡†åŒ–éœ€æ±‚

4. **ç ”ç©¶å’Œå®éªŒ**
   - AI åº”ç”¨ç ”ç©¶
   - æ–°æŠ€æœ¯éªŒè¯
   - ç®—æ³•ä¼˜åŒ–

---

## ğŸ› ï¸ å¦‚ä½•é€‰æ‹©ï¼Ÿ

### é€‰æ‹©å®æ—¶èŠå¤©æœºå™¨äººï¼Œå¦‚æœï¼š

- âœ… éœ€è¦æœ€å¿«çš„å“åº”é€Ÿåº¦
- âœ… åŠŸèƒ½éœ€æ±‚ç›¸å¯¹ç®€å•
- âœ… å›¢é˜Ÿè§„æ¨¡è¾ƒå°
- âœ… å¿«é€Ÿè¿­ä»£å’Œéƒ¨ç½²
- âœ… èµ„æºé¢„ç®—æœ‰é™

### é€‰æ‹© LangChain èŠå¤©æœºå™¨äººï¼Œå¦‚æœï¼š

- âœ… éœ€è¦å¤æ‚çš„åŠŸèƒ½é›†æˆ
- âœ… é•¿æœŸé¡¹ç›®ç»´æŠ¤
- âœ… å›¢é˜Ÿæœ‰å……è¶³çš„å­¦ä¹ æ—¶é—´
- âœ… ä¼ä¸šçº§åº”ç”¨éœ€æ±‚
- âœ… éœ€è¦åˆ©ç”¨ LangChain ç”Ÿæ€ç³»ç»Ÿ

---

## ğŸ”® è¿›é˜¶å‘å±•è·¯å¾„

### ä»å®æ—¶èŠå¤©åˆ° LangChain çš„è¿ç§»

1. **ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è¿ç§»**
   ```python
   # å°†ç›´æ¥ API è°ƒç”¨åŒ…è£…ä¸º LangChain ç»„ä»¶
   from langchain_google_genai import ChatGoogleGenerativeAI
   llm = ChatGoogleGenerativeAI(model="gemini-2.0-flash-exp")
   ```

2. **ç¬¬äºŒé˜¶æ®µï¼šçŠ¶æ€ç®¡ç†**
   ```python
   # å¼•å…¥ LangGraph çŠ¶æ€ç®¡ç†
   from langgraph.graph import StateGraph
   ```

3. **ç¬¬ä¸‰é˜¶æ®µï¼šåŠŸèƒ½æ‰©å±•**
   ```python
   # æ·»åŠ å·¥å…·ã€è®°å¿†ç­‰é«˜çº§åŠŸèƒ½
   from langchain.tools import Tool
   from langchain.memory import ConversationBufferMemory
   ```

### æ··åˆæ¶æ„æ–¹æ¡ˆ

å¯¹äºæŸäº›åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘æ··åˆæ¶æ„ï¼š

```python
class HybridChatBot:
    def __init__(self):
        # å¿«é€Ÿå“åº”çš„ç›´æ¥è°ƒç”¨
        self.simple_llm = ChatGoogleGenerativeAI()
        
        # å¤æ‚åŠŸèƒ½çš„ LangChain å¤„ç†
        self.complex_graph = self.build_langchain_graph()
    
    def chat(self, user_input):
        if self.is_simple_query(user_input):
            return self.simple_llm.invoke([HumanMessage(content=user_input)])
        else:
            return self.complex_graph.invoke({"messages": [HumanMessage(content=user_input)]})
```

---

## ğŸ“š æ€»ç»“

ä¸¤ç§æ¶æ„å„æœ‰ä¼˜åŠ¿ï¼Œé€‰æ‹©åº”è¯¥åŸºäºå…·ä½“éœ€æ±‚ï¼š

- **å®æ—¶èŠå¤©æœºå™¨äºº**ï¼šè¿½æ±‚ç®€å•ã€å¿«é€Ÿã€ç›´æ¥çš„å¯¹è¯ä½“éªŒ
- **LangChain èŠå¤©æœºå™¨äºº**ï¼šéœ€è¦å¤æ‚åŠŸèƒ½ã€é•¿æœŸç»´æŠ¤ã€ä¼ä¸šçº§åº”ç”¨

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥å…ˆä»å®æ—¶èŠå¤©æœºå™¨äººå¼€å§‹å¿«é€ŸéªŒè¯æƒ³æ³•ï¼Œç„¶åæ ¹æ®éœ€æ±‚å¢é•¿æƒ…å†µè€ƒè™‘è¿ç§»åˆ° LangChain æ¶æ„ï¼Œæˆ–è€…é‡‡ç”¨æ··åˆæ¶æ„æ¥å¹³è¡¡æ€§èƒ½å’ŒåŠŸèƒ½éœ€æ±‚ã€‚

---

*æœ¬æ–‡æ¡£åŸºäºå®é™…é¡¹ç›®ç»éªŒæ€»ç»“ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…åšå‡ºåˆé€‚çš„æŠ€æœ¯é€‰æ‹©ã€‚* 